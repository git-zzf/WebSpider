## 实例3：百度/360关键词提交

*向百度和360搜索引擎提交关键词并获得搜索结果*

## 搜索引擎关键词提交接口

百度的关键词接口：

`http://www.baidu.com/s?wd=keyword`

360的关键词接口：

`http://www.so.com/s?q=keyword`

只要替换keyword就可以提交关键词了

## 实现

```python
>>> import requests
```

### 修改URL

使用params字段修改url。首先构造一个键值对，搜索"python"

```python
>>> kv = {'wd':'Python'}
>>> r = requests.get("http://www.baidu.com/s", params = kv)
>>> r.status_code
```

返回200，说明请求已经被提交了url

### 查看URL

现在可以查看，提交给百度的url是什么

使用response对象中包含的request信息

```python
r.request.url
```

看到现在的url已经是符合百度关键词接口的url了

+ 实际返回了百度安全验证

kv键值对wd:Python中的wd是搜索引擎的表示，Python是关键词

### 查看内容

看下返回内容的长度

```python
len(r.text)
```

返回302829，也就是返回了300多k的信息。

+ 实际返回1519

****

## 全代码

### 百度

```python
import requests
keyword = "Python"
try:
    kv = {'wd': keyword}
    r = requests.get("http://www.baidu.com/s", params = kv)
    print(r.request.url)
    r.raise_for_status()
    print(len(r.text))
except:
    print("爬取失败")
```

实际中遇到百度安全验证

### 360

```python
import requests
keyword = "Python"
try:
    kv = {'q': keyword}
    r = requests.get("http://www.so.com/s", params = kv)
    print(r.request.url)
    r.raise_for_status()
    print(len(r.text))
except:
    print("爬取失败")
```

