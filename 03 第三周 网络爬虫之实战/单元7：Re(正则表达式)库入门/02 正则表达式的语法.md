# 正则表达式的语法

正则表达式由字符和操作符构成

## 正则表达式常用操作符：

| 操作符 | 说明                             | 实例                                    |
| ------ | -------------------------------- | --------------------------------------- |
| .      | 表示任何单个字符                 |                                         |
| []     | 字符集，对单个字符给出取值范围   | [abc]表示a、b、c、[a-z]表示a到z单个字符 |
| [^ ]   | 非字符集，对单个字符给出排除范围 | [^abc]表示非a或b或c的单个字符           |
| *      | 前一个字符0次或无限次扩展        | abc*表示ab、abc、abcc、abccc等          |
| +      | 前一个字符1次或无限次扩展        | abc+表示abc、abcc、abccc等              |
| ?      | 前一个字符0次或1次扩展           | abc？表示ab、abc                        |
| \|     | 左右表达式任意一个               | abc\|def表示abc、def                    |
| {m}    | 扩展前一个字符m次                | ab{2}c表示abbc                          |
| {m,n}  | 扩展前一个字符m至n次（含n）      | ab{1,2}c表示abc、abbc                   |
| ^      | 匹配字符串开头                   | ^abc表示abc，而且abc在一个字符串的开头  |
| $      | 匹配字符串结尾                   | abc$表示abc且在一个字符串的结尾         |
| ( )    | 分组标记，内部只能使用\|操作符   | (abc)表示abc，(abc\|def)表示abc、def    |
| \d     | 数字，等价于[0-9]                |                                         |
| \w     | 单词字符，等价于[A-Za-z0-9_]     |                                         |



## 正则表达式实例：

```
正则表达式
P(Y|YT|YTH|YTHO)?N
对应字符串
'PN'、'PYN'、'PYTN'、'PYTHN'、'PYTHON'
```

?号表示之前的部分的0次或1次扩展，()加|表示选择其中的一个元素



```
正则表达式
PYTHON+
对应字符串
'PYTHON'、'PYTHONN'、'PYTHONNN'...
```

+号表示+号之前的元素1次或无限次扩展



```
正则表达式
PY[TH]ON
对应字符串
'PYTON'、'PYHON'
```

表示PY和ON之间的字母是从TH中选择一个字符



```
正则表达式
PY[^TH]?ON
对应字符串
'PYON'、'PYaON'、'PYbON'、'PYcON'...
```

表示从只要不是大写T或者H的字符中，选择0个或1个放到PY和ON之间



```
正则表达式
PY{:3}N
对应字符串
'PN'、'PYN'、'PYYN'、'PYYYN'
```

在PY和N之间拓展Y三次，{m}表示拓展大括号之前的字符m次



## 经典正则表达式实例：

```
^[A-Za-z]+$				由26个字母组成的字符串
^[A-Za-z0-9]+$			由26个字母和数字组成的字符串
^-?\d+$					整数形式的字符串
^[0-9]*[1-9][0-9]*$		正整数形式的字符串
[1-9]\d{5}				中国境内邮政编码，6位
[\u4e00-\u9fa5]			匹配中文字符，utf-8
\d{3}-\d{8}|d{4}-\d{7}	国内电话号码，如010-6813536
```



## 根据字符串构造正则表达式

IP地址字符串形式的正则表达式（IP地址分4段，每段0-255）

```
\d+.\d+.|d+.\d+						不考虑每一段的取值范围和空间，只考虑.的分隔
\d{1,3}.\d{1,3}.\d{1,3}.\d{1,3}.	可以重复1到3个数字
```

但是这两种方法都不精确，比如300.300.300.300这个地址无法用第二种表示

需要分段表示：

```
精确写法：
0-99:			[1-9]?\d
100-199:		1\d{2}
200-249:		2[0-4]\d
250-255:		25[0-5]
```

结合起来，用|连接

```
(([1-9]?\d|1\d{2}|2[0-4]\d|25[0-5]).){3}([1-9]?\d|1\d{2}|2[0-4]\d|25[0-5])
```

